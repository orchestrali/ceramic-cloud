<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="https://sallyandbobminor.wordpress.com/wp-content/uploads/2025/07/bristol-major-short.png" />

    <title>Build a music scheme</title>

    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/complibbuild.css" />
  </head>
  <body>
    <h2>Build a complib music scheme</h2>
    <div id="aboutpanel" style="display:none;">
      <p>This website helps with the building and testing of a custom scheme for evaluating bellringing compositions on <a href="https://complib.org" target="blank">complib.org</a>.</p>
      <p>The structure of a complib music scheme spreadsheet is explained in <a href="https://complib.org/issue/581" target="blank">this issue</a>.</p>
      <p>This page is designed to reduce the amount of copying and pasting involved. Some things can't be edited here so will need to be adjusted in the downloaded file.</p>
      <p>Reloading will clear all your work!</p>
      <p>Made by Alison Stevens</p>
    </div>
    <div>
      <button type="button" id="downloadcsv" style="display:none;">Download scheme csv</button>
    </div>
    <div id="schemetables">
      <table id="categorytable">
        <thead>
          <tr>
            <th></th><!--order-->
            <th class="wide">Category</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div id="instructions" style="display:none;">
      <p>"pattern" corresponds to "Mask" in the final spreadsheet. It can include parentheses, to indicate that the bells inside the parentheses can be in any order. For example, "xxxx(57)68" will be converted to two masks, xxxx5768 and xxxx7568.</p>
      <p>transpose</p>
    </div>
    <div class="form">
      <div id="addrow">
        <select id="stage">
          <option value="5">5 - Doubles</option>
          <option value="6">6 - Minor</option>
          <option value="7">7 - Triples</option>
          <option value="8">8 - Major</option>
          <option value="9">9 - Caters</option>
          <option value="10">10 - Royal</option>
          <option value="11">11 - Cinques</option>
          <option value="12">12 - Maximus</option>
          <option value="13">13 - Sextuples</option>
          <option value="14">14 - Fourteen</option>
          <option value="15">15 - Septuples</option>
          <option value="16">16 - Sixteen</option>
        </select>
        <label for="patternentry">pattern: <input type="text" id="patternentry" /></label>
        <label for="patterndescript">description: <input type="text" id="patterndescript" /></label>
        <label for="patterncat">category: <input type="text" id="patterncat" /></label>
        <select id="stroke">
          <option>Any</option>
          <option>Handstroke</option>
          <option>Backstroke</option>
        </select>
        <label for="front"><input type="checkbox" checked id="front" />Front</label>
        <label for="back"><input type="checkbox" checked id="back" />Back</label>
        <label for="middle"><input type="checkbox" checked id="middle" />Middle</label>
        <label for="points">points: <input type="number" id="points" value="1" /></label>
        <label for="transpose"><input type="checkbox" id="transpose" />transpose</label>
        <button id="addpattern">Add</button>
        <p id="addinginfo"></p>
      </div>
    </div>
    <div class="form">
      Apply scheme to method or composition
      <div>
        <div>
          <label for="complibid">Complib id: <input type="number" id="complibid" /></label>
        </div>
        <div>
          <label><input type="radio" name="idtype" value="method" />method</label><label><input type="radio" name="idtype" value="composition" />composition</label>
        </div>
      </div>
      <button id="viewcomp">Go</button>
    </div>
    
    <div id="loading" style="display:none;">
      <img src="/images/wait.gif" alt="spinning circle" />
    </div>

    <div id="compdisplay">
      <h3></h3>
      <p id="totals"></p>
  
      <h4>Music report</h4>
      <table id="reporttable">
        <thead>
          <tr>
            <th>Musical combination</th>
            <th>Front</th>
            <th>Internal</th>
            <th>Back</th>
            <th>Count</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
  
      <h4>Rows</h4>
      <table class="sortable" id="comptable">
        <thead>
          <tr>
            <th class="sorttable_numeric">num</th>
            <th class="row sorttable_bellrow">Row</th>
            <th class="sorttable_numeric">Points</th>
            <th class="sorttable_numeric">Num places</th>
            <th>Category</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
    <script src="sort.js"></script>
    <script src="complibbuild.js"></script>
  </body>
</html>
